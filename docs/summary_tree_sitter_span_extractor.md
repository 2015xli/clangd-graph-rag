# Algorithm Summary: `tree_sitter_span_extractor.py`

## 1. Role in the Pipeline

This script acts as a **library module** for the main `clangd_code_graph_builder.py` orchestrator. Its sole responsibility is to parse C/C++ source files and provide the precise location (span) of every function's body.

This information is essential for the call graph building process, as it allows the pipeline to determine which function (the caller) contains a specific function call.

The script provides the `SpanExtractor` class, which encapsulates all the necessary parsing logic.

## 2. Core Technology

The script is built upon the **`tree-sitter`** parsing framework.

- **Parser Initialization**: It uses `tree-sitter-c` to get the C language grammar. A `Parser` instance is configured with this grammar to build a concrete syntax tree from the source code.

- **AST Traversal**: The core of the algorithm involves traversing the Abstract Syntax Tree (AST) generated by `tree-sitter`. This allows the script to reliably identify `function_definition` nodes based on the C grammar, making it robust against formatting variations.

## 3. Key Methods

### `get_function_spans_from_folder(folder, format="dict")`

This is the primary method used by the main pipeline.

1.  It recursively walks the provided project folder to find all `.c` and `.h` files.
2.  For each file, it uses the `tree-sitter` parser to build an AST.
3.  It traverses the AST, finds all `function_definition` nodes, and extracts the start and end coordinates for both the function's name (`NameLocation`) and its body (`BodyLocation`).
4.  It returns a list of dictionaries, where each dictionary represents one function and its location info. This list is then passed to the `ClangdCallGraphExtractor`.
